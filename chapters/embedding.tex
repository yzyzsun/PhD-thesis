\chapter{Compositional Embeddings of Domain-Specific Languages} \label{ch:embedding}

This chapter presents the second case study: compositional embeddings of
domain-specific languages (DSLs). We concentrate on how to embed DSLs in a
modular way and compose them to build larger DSLs. We start with an introduction
to the problem that we aim to solve in \autoref{sec:problem}. Then we
demonstrate existing embedding techniques in \autoref{sec:embed} and show in
\autoref{sec:lang} that \emph{compositional embeddings} combine the advantages
of shallow and deep embeddings and surpasses other techniques like tagless-final
embeddings by supporting modular dependencies. We validate our approach by
showcasing a compositionally embedded DSL for document authoring in
\autoref{sec:dsl} and further evaluating it in \autoref{sec:evaluation}.

\input{chapters/embedding/introduction}
\input{chapters/embedding/background}
\input{chapters/embedding/compositional}
\input{chapters/embedding/ext}
\input{chapters/embedding/evaluation}

\section{Conclusion}

We have presented compositional embeddings and shown their advantages compared
to existing embedding techniques in terms of modularity and compositionality.
CP's support for dependency injection, pattern matching, and nested composition
makes \emph{seemingly} non-compositional interpretations feasible in
compositional embeddings. Thus, dependent interpretations and complex
transformations can be modularly defined. These virtues of compositional
embeddings lay down the foundation for the \ExT DSL. The viability of
compositionally embedded \ExT has been evaluated with three applications:
\emph{Minipedia} shows its extensibility, type safety, data consistency, and
ability to modularly handle dependencies; \emph{fractals} show that
general-purpose computation and linguistic reuse are both available; finally,
\emph{charts} show a simpler approach to delegation compared to object-oriented
design patterns.
